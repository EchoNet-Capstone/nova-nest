<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    &lt;script&gt;console.log(&quot;✅ mapInteractions.js loaded!&quot;);

// Function to attach click events to markers
function attachMarkerEvents(mapInstance) {
    console.log(&quot;✅ Attaching marker click events...&quot;);

    if (!mapInstance) {
        console.error(&quot;❌ ERROR: Map instance is undefined.&quot;);
        return;
    }

    let markerCount = 0;
    mapInstance.eachLayer(function (layer) {
        if (layer instanceof L.Marker) {
            markerCount++;
            console.log(&quot;✅ Marker found:&quot;, layer);

            layer.on(&quot;click&quot;, function () {
                if (layer.getPopup()) {
                    let popupContent = layer.getPopup().getContent();
                    let contentText = &quot;&quot;;
                    if (typeof popupContent === &quot;string&quot;) {
                        contentText = popupContent;
                    } else if (popupContent instanceof HTMLElement) {
                        contentText = popupContent.innerText;
                    } else {
                        contentText = String(popupContent);
                    }
                    console.log(&quot;Popup Content:&quot;, contentText);
                    let match = contentText.match(/Buoy ID: (BUOY-\d+)/);
                    if (match) {
                        let buoyId = match[1];
                        console.log(&quot;✅ Clicked Buoy ID:&quot;, buoyId);
                        alert(&quot;Buoy Clicked: &quot; + buoyId);
                        if (window.qtChannel) {
                            console.log(&quot;✅ Sending Buoy ID to PyQt&quot;);
                            window.qtChannel.markerClicked.emit(buoyId);
                        } else {
                            console.log(&quot;❌ Qt WebChannel not found!&quot;);
                        }
                    }
                }
            });
        }
    });
    console.log(&quot;✅ Total Markers Found:&quot;, markerCount);
}

// When the document is fully loaded, call attachMarkerEvents with the map instance passed from Python.
document.addEventListener(&quot;readystatechange&quot;, function () {
    if (document.readyState === &quot;complete&quot;) {
        console.log(&quot;✅ Document loaded, running attachMarkerEvents()...&quot;);
        attachMarkerEvents(map_3d4316bdf9808d9b466078bc009b1b01);
    }
});&lt;/script&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_3d4316bdf9808d9b466078bc009b1b01 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
    &lt;script src=&quot;https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/ardhi/Leaflet.MousePosition/src/L.Control.MousePosition.min.css&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_3d4316bdf9808d9b466078bc009b1b01&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_3d4316bdf9808d9b466078bc009b1b01 = L.map(
                &quot;map_3d4316bdf9808d9b466078bc009b1b01&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 2,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
}

                }
            );

            

        
    
            var tile_layer_03b57193a24b2cbf36d800d8eae6f61a = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 19,
  &quot;maxNativeZoom&quot;: 19,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_03b57193a24b2cbf36d800d8eae6f61a.addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
            var tile_layer_e21962c1bec1a8e9c677b8c411ccb0b4 = L.tileLayer(
                &quot;https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 18,
  &quot;maxNativeZoom&quot;: 18,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;Map data: \u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors, \u003ca href=\&quot;http://viewfinderpanoramas.org\&quot;\u003eSRTM\u003c/a\u003e | Map style: \u0026copy; \u003ca href=\&quot;https://opentopomap.org\&quot;\u003eOpenTopoMap\u003c/a\u003e (\u003ca href=\&quot;https://creativecommons.org/licenses/by-sa/3.0/\&quot;\u003eCC-BY-SA\u003c/a\u003e)&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
            tile_layer_e21962c1bec1a8e9c677b8c411ccb0b4.addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
            var mouse_position_523a1b45d81ca22ab5a0bd34e639fae3 = new L.Control.MousePosition(
                {
  &quot;position&quot;: &quot;bottomright&quot;,
  &quot;separator&quot;: &quot;, &quot;,
  &quot;emptyString&quot;: &quot;Unavailable&quot;,
  &quot;lngFirst&quot;: false,
  &quot;numDigits&quot;: 5,
  &quot;prefix&quot;: &quot;Coordinates:&quot;,
}
            );
            mouse_position_523a1b45d81ca22ab5a0bd34e639fae3.options[&quot;latFormatter&quot;] =
                undefined;
            mouse_position_523a1b45d81ca22ab5a0bd34e639fae3.options[&quot;lngFormatter&quot;] =
                undefined;
            map_3d4316bdf9808d9b466078bc009b1b01.addControl(mouse_position_523a1b45d81ca22ab5a0bd34e639fae3);
        
    
            var marker_8ee521d6401c580c712d41f33d268201 = L.marker(
                [39.80038725838574, -120.48762287895555],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_1ecab92255760afd3fe18d90d7b4b745 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_a6d755aefa18abf9dd9a6dfe1859d221 = $(`&lt;div id=&quot;html_a6d755aefa18abf9dd9a6dfe1859d221&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-1&lt;/div&gt;`)[0];
                popup_1ecab92255760afd3fe18d90d7b4b745.setContent(html_a6d755aefa18abf9dd9a6dfe1859d221);
            
        

        marker_8ee521d6401c580c712d41f33d268201.bindPopup(popup_1ecab92255760afd3fe18d90d7b4b745)
        ;

        
    
    
            marker_8ee521d6401c580c712d41f33d268201.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_1e583524c84f60d9cf4dc6fae0a81eee = L.marker(
                [39.55771748388093, -120.11333186764755],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_10240c970028cb58ece79f7b12553d91 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_857dd396c84466fbf57788068415086f = $(`&lt;div id=&quot;html_857dd396c84466fbf57788068415086f&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-2&lt;/div&gt;`)[0];
                popup_10240c970028cb58ece79f7b12553d91.setContent(html_857dd396c84466fbf57788068415086f);
            
        

        marker_1e583524c84f60d9cf4dc6fae0a81eee.bindPopup(popup_10240c970028cb58ece79f7b12553d91)
        ;

        
    
    
            marker_1e583524c84f60d9cf4dc6fae0a81eee.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_36c7c7b6d699861ce9acb7ca3e825c5a = L.marker(
                [39.977131825569224, -120.65381342774783],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_3a689c682473513f3f6b71e3db477dc3 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_0f337c99ef857bb47d8e588dc5c645f7 = $(`&lt;div id=&quot;html_0f337c99ef857bb47d8e588dc5c645f7&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-3&lt;/div&gt;`)[0];
                popup_3a689c682473513f3f6b71e3db477dc3.setContent(html_0f337c99ef857bb47d8e588dc5c645f7);
            
        

        marker_36c7c7b6d699861ce9acb7ca3e825c5a.bindPopup(popup_3a689c682473513f3f6b71e3db477dc3)
        ;

        
    
    
            marker_36c7c7b6d699861ce9acb7ca3e825c5a.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_406831595c556be27e647ea566df949b = L.marker(
                [39.638441779765465, -120.2130751910005],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_f38151b68b317a68b09d621dddd696f6 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_0a2efbadcc784c60b45e378c2fd84b6a = $(`&lt;div id=&quot;html_0a2efbadcc784c60b45e378c2fd84b6a&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-4&lt;/div&gt;`)[0];
                popup_f38151b68b317a68b09d621dddd696f6.setContent(html_0a2efbadcc784c60b45e378c2fd84b6a);
            
        

        marker_406831595c556be27e647ea566df949b.bindPopup(popup_f38151b68b317a68b09d621dddd696f6)
        ;

        
    
    
            marker_406831595c556be27e647ea566df949b.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_3bf7f9bea16ba96796a4789f08932743 = L.marker(
                [39.51313005222162, -120.5326042108411],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_17cf9dbebada70b7cea206080c913c54 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_b8f3c6286c737a3ebffbbdf1c1022e74 = $(`&lt;div id=&quot;html_b8f3c6286c737a3ebffbbdf1c1022e74&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-5&lt;/div&gt;`)[0];
                popup_17cf9dbebada70b7cea206080c913c54.setContent(html_b8f3c6286c737a3ebffbbdf1c1022e74);
            
        

        marker_3bf7f9bea16ba96796a4789f08932743.bindPopup(popup_17cf9dbebada70b7cea206080c913c54)
        ;

        
    
    
            marker_3bf7f9bea16ba96796a4789f08932743.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_e468140653c4812d88d967c6b7633331 = L.marker(
                [39.69973789576805, -120.16611790890829],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_92ee0debcb968a4cd35b7bb60ea616e5 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_778ae7b43bc93105820506255f59bb32 = $(`&lt;div id=&quot;html_778ae7b43bc93105820506255f59bb32&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-6&lt;/div&gt;`)[0];
                popup_92ee0debcb968a4cd35b7bb60ea616e5.setContent(html_778ae7b43bc93105820506255f59bb32);
            
        

        marker_e468140653c4812d88d967c6b7633331.bindPopup(popup_92ee0debcb968a4cd35b7bb60ea616e5)
        ;

        
    
    
            marker_e468140653c4812d88d967c6b7633331.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_d3c18459d6d25acd9890b93338af81e1 = L.marker(
                [39.65761158382477, -120.0369845777014],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_b4d7e34f56303be485f24c86449415c6 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_47cb654f6993ea8352f910ac6ab3ea8d = $(`&lt;div id=&quot;html_47cb654f6993ea8352f910ac6ab3ea8d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-7&lt;/div&gt;`)[0];
                popup_b4d7e34f56303be485f24c86449415c6.setContent(html_47cb654f6993ea8352f910ac6ab3ea8d);
            
        

        marker_d3c18459d6d25acd9890b93338af81e1.bindPopup(popup_b4d7e34f56303be485f24c86449415c6)
        ;

        
    
    
            marker_d3c18459d6d25acd9890b93338af81e1.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_8baf6da702b939404338d4788fe21238 = L.marker(
                [39.763983248112474, -120.70266782739125],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_02e0cb028c730284e1397bc5ae520ee1 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_9ed97272373b481d9fb7e9bad7a7f174 = $(`&lt;div id=&quot;html_9ed97272373b481d9fb7e9bad7a7f174&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-8&lt;/div&gt;`)[0];
                popup_02e0cb028c730284e1397bc5ae520ee1.setContent(html_9ed97272373b481d9fb7e9bad7a7f174);
            
        

        marker_8baf6da702b939404338d4788fe21238.bindPopup(popup_02e0cb028c730284e1397bc5ae520ee1)
        ;

        
    
    
            marker_8baf6da702b939404338d4788fe21238.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_1238f2cff99415a84c41a791bac3fd49 = L.marker(
                [39.911696005531326, -120.39835151504863],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_b721a1ca4481904d3e92f2fd37bb46db = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_98d3bb1f45301bc19deb46376c9c1b11 = $(`&lt;div id=&quot;html_98d3bb1f45301bc19deb46376c9c1b11&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-9&lt;/div&gt;`)[0];
                popup_b721a1ca4481904d3e92f2fd37bb46db.setContent(html_98d3bb1f45301bc19deb46376c9c1b11);
            
        

        marker_1238f2cff99415a84c41a791bac3fd49.bindPopup(popup_b721a1ca4481904d3e92f2fd37bb46db)
        ;

        
    
    
            marker_1238f2cff99415a84c41a791bac3fd49.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
    
            var marker_fef3794b597b82ebf25421f6359dfdc2 = L.marker(
                [39.95052906070646, -120.52931245806784],
                {
}
            ).addTo(map_3d4316bdf9808d9b466078bc009b1b01);
        
    
        var popup_43784c34fdb416eaf07c131ea7cca3b2 = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
                var html_90e648a0114897e67a862d92d1227f16 = $(`&lt;div id=&quot;html_90e648a0114897e67a862d92d1227f16&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Buoy ID: BUOY-10&lt;/div&gt;`)[0];
                popup_43784c34fdb416eaf07c131ea7cca3b2.setContent(html_90e648a0114897e67a862d92d1227f16);
            
        

        marker_fef3794b597b82ebf25421f6359dfdc2.bindPopup(popup_43784c34fdb416eaf07c131ea7cca3b2)
        ;

        
    
    
            marker_fef3794b597b82ebf25421f6359dfdc2.bindTooltip(
                `&lt;div&gt;
                     Click for details
                 &lt;/div&gt;`,
                {
  &quot;sticky&quot;: true,
}
            );
        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>
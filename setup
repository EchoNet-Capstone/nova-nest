#!/bin/bash
sudo apt update

REQUIRED_PKG="python3-venv"

PKG_OK=$(dpkg-query -W --showformat='${Status}\n' $REQUIRED_PKG|grep "install ok installed")

echo Checking for $REQUIRED_PKG: $PKG_OK
if [ "" = "$PKG_OK" ]; then
	echo "No $REQUIRED_PKG. Setting up $REQUIRED_PKG."
	sudo apt --yes install $REQUIRED_PKG
else
	echo "$REQUIRED_PKG already installed! :)"
fi

REQUIRED_PKG="python3-qtpy"

PKG_OK=$(dpkg-query -W --showformat='${Status}\n' $REQUIRED_PKG|grep "install ok installed")

echo Checking for $REQUIRED_PKG: $PKG_OK
if [ "" = "$PKG_OK" ]; then
	echo "No $REQUIRED_PKG. Setting up $REQUIRED_PKG."
	sudo apt --yes install $REQUIRED_PKG
else
	echo "$REQUIRED_PKG already installed! :)"
fi

python3 -m venv --clear env

source env/bin/activate

# get python packages
pip install -r requirements.txt

deactivate
